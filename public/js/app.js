!function(t){t.TasksList=function(t){var s=this;this.elem=$(t),this.modal=s.elem.find(".tasks-list__modal").dialog({autoOpen:!1}),this.tasks=null,this.tasksDetails={};var a=function(t){s.elem.find(".tasks-list__pagination").pagination({dataSource:function(a){if(t)return a(t);$.ajax({dataType:"json",url:"/api/v1/task",success:function(t){s.tasks=t,a(t)}})},callback:function(t){var a="";t.forEach(function(t){a+='<tr data-id="'+t.id+'" class="tasks-list__row"><td>'+t.id+"</td><td>"+t.title+"</td><td>"+t.date+"</td><tr>"}),s.elem.find(".tasks-list__table tbody").html(a)}})};this.searchByTitle=function(t){var i=s.tasks.reduce(function(s,a){return a.title.toLowerCase().indexOf(t.toLowerCase())>-1&&s.push(a),s},[]);a(i)},this.showTaskDetails=function(t){var a=function(t){s.modal.find(".tasks-list__modal-title").html(t.title),s.modal.find(".tasks-list__modal-date").html(t.date),s.modal.find(".tasks-list__modal-author").html(t.author),s.modal.find(".tasks-list__modal-status").html(t.status),s.modal.find(".tasks-list__modal-desc").html(t.description),s.modal.dialog("option","title","Информация о задаче №"+t.id).dialog("open")},i=s.tasksDetails[t];i?a(i):$.ajax({dataType:"json",url:"/api/v1/task/"+t,success:function(i){a(i),s.tasksDetails[t]=i}})},a(),function(){s.elem.find(".tasks-list__search").on("keyup",function(){s.searchByTitle($(this).val())}),s.elem.click(function(t){var a=$(t.target).closest(".tasks-list__row").data("id");a&&s.showTaskDetails(a)})}()}}(window);